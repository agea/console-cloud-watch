!function(e,n,o){"use strict";"function"==typeof window.define&&window.define.amd?window.define(o):"undefined"!=typeof module&&module.exports?module.exports=o():n.exports?n.exports=o():n.ConsoleWatch=o()}(0,this,function(){return function(e,n,o,t,c,r,s){function a(){setInterval(function(){var e=u.splice(0);e.length&&l.putLogEvents({logEvents:e,sequenceToken:localStorage.getItem("ConsoleWatch:sequenceToken"),logGroupName:t,logStreamName:f},function(n,o){n&&(u=e.concat(u),"InvalidSequenceTokenException"==n.code&&localStorage.setItem("ConsoleWatch:sequenceToken",n.message.split("The next expected sequenceToken is: ")[1])),o&&localStorage.setItem("ConsoleWatch:sequenceToken",o.nextSequenceToken)})},r||1e4)}function i(e){l.createLogStream({logGroupName:t,logStreamName:e},function(n,o){n&&"ResourceAlreadyExistsException"!==n.code?console.log(n,n.stack):(localStorage.setItem("ConsoleWatch:stream",e),a())})}var u=[],l=new AWS.CloudWatchLogs({accessKeyId:e,secretAccessKey:n,region:o}),f=localStorage.getItem("ConsoleWatch:stream");f?a():"undefined"==typeof Fingerprint2?i(function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}()):(new Fingerprint2).get(function(e,n){i(f)}),window.onerror=function(e,n,o,t,c){StackTrace.fromError(c).then(function(o){var t=e+"\n"+n+"\n"+o.map(function(e){return e.toString()}).join("\n");u.push({message:t,timestamp:(new Date).getTime()})})},"undefined"!=typeof console&&(c||["error"]).forEach(function(e){var n=console[e];console[e]=function(e){u.push({message:e,timestamp:(new Date).getTime()}),s||n(e)}})}});